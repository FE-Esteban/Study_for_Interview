# 브라우저 주소창에 URL 입력할 시 일어나는 일

- 브라우저가 주소창에 입력된 URL 값을 DNS 서버로 전송해서 IP주소를 받아온다.
- 해당 IP 주소로 html과 같은 리소스 파일을 요청한다.
- 받아온 리소스 파일을 브라우저가 렌더링하여 사용자에게 보여준다.

### 받아온 리소스 렌더링 하는 방법

- 브라우저가 html 파일을 파싱해서 DOM 트리 구축, css 파일을 파싱하여 CSSOM 트리 구축하고 두 트리를 합쳐 렌더 트리를 구성한다. 이 렌더 트리의 노드의 크기와 위치를 계산(Layout)하고 화면에 그리게 된다.

# 🍀 URL의 구조

### https://github.com/FE-Esteban/Study_for_Interview

- 프로토콜(통신 규약) : http / https
- 도메인(도메인 네임) : github.com
- 경로(Path) : FE-Esteban은 Study_for_Interview라는 리소스로 이어지는 경로이다. FE-Esteban 디렉토리 내부에 Study_for_Interview라는 파일이 있는 것과 동일하다.
- 리소스(Resource) : 웹 사이트가 요청한 .html과 같은 파일 확장자를 갖는 데이터
- URL은 브라우저가 어떤 방법(Protocol)으로 어떤 서버에(Domain) 어떤 경로(Path)에 위치한 파일(Resource)을 요청하는지를 표현한다.

## 1. 웹 브라우저가 도메인 명의 IP 주소 조회

- DNS를 통해 도메인을 이용해 서버의 IP 주소를 알 수 있다.
- DNS는 복잡하고 빨라야 하기 때문에 DNS 데이터를 웹 브라우저 사이의 서로 다른 계층과 인터넷의 다양한 위치에 임시로 저장된다.
- 웹 브라우저는 고유한 캐시, 운영 체재 캐시, 라우터의 로컬 네트워크 캐시, 회사 네트워크 또는 인터넷 서비스 제공업체(ISP)의 DNS 서버 캐시를 확인한다.
- 웹 브라우저는 먼저 캐시 계층에서 도메인에 해당하는 IP 주소가 존재하는지 확인한다. IP 주소가 존재하지 않은 경우 ISP의 DNS 서버가 인터넷에 있는 여러 DNS 서버에 검색을 요청하여 IP 주소를 찾을 때 까지 재귀적 DNS 조회를 수행한다.

## 2. 웹 브라우저가 서버와의 TCP 연결 시작

- 요청 패킷은 일반적으로 TCP/IP라는 전송 제어 프로토콜을 사용해 라우터, 인터넷 서비스 제공회사 교환기를 통해 이동된다.
- 통신 회사간 경로인 라우팅 테이블을 따라 연결할 IP 주소가 있는 웹 서버를 찾는다.
- 라우팅 테이블을 따라 웹 서버를 찾고, 웹 서버와 TCP 연결을 설정하고 HTTP를 통해 평문 통신을 시작한다. HTTPS의 경우 TLS 과정을 통해 데이터를 암호화 하여 통신한다.

## 3. 웹 브라우저가 HTTP 요청을 서버로 전송

- 요청 라인, 요청 헤더에 정보를 표기하여 서버에 전송
- 요청 라인
  ```
  GET /FE-Esteban/Study_for_Interview
  ```
- 요청 헤더
  ```
  Host: 호스트
  User-Agent: 사용자 에이전트
  Accept: 클라이언트가 이해 가능한 컨텐츠 타입이 무엇인지를 나타냄
  ```

## 4. 웹 서버가 요청을 처리하고 응답을 다시 전송

- 요청 상태, 응답 헤더, 리소스를 표기하여 브라우저 응답 전송

## 5. 웹 브라우저가 콘텐츠 렌더링

- 웹 브라우저가 응답 헤더를 검사하여 리소스의 타입을 알아낸 후, 해당 타입의 리소스를 렌더링하는 방법을 확인한다.
- Content-Type : 리소스의 타입을 나타낸다.
  <br/><br/>

## Reference

https://www.nokiahub.site/dev/browser/
