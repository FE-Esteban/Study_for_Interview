# 클로저(closure)

- 클로저는 자바스크립트에서만 사용되는 개념이 아니고 **함수를 일급 객체로 취급**하는 함수형 프로그래밍 언어에서 사용되는 특성이다.
- 클로저는 함수와 그 **함수가 선언됐을 때의 렉시컬 환경과의 조합**이다.
  > 스코프에서 렉시컬 스코프는 함수가 어디에 선언했는지에 따라 결정된다는 개념에 따른 결과이다. 즉 렉시컬 환경은 함수가 어디에서 선언이 됐는지에 대한 환경이다.
- 렉시컬 환경에 따라 클로저는 반환된 내부함수가 **자신이 선언됐을 때의 환경인 스코프를 기억**하여 자신이 선언됐을 때의 환경 밖에서 호출되어도 그 환경에 접근할 수 있는 함수를 말한다.
- 쉽게 말하면 클로저는 **자신이 생성될 때의 환경을 기억하는 함수**다.

# 🍀 클로저의 활용

- 가장 핵심은 자신이 생성될 때의 환경을 기억하는 기능이다.

## 1. 상태 유지

- 가장 유용하게 사용되는 상황은 **현재 상태를 기억하고 변경된 최신 상태를 유지**하는 것이다.
- 즉시 실행 함수의 경우 따로 변수에 할당 되는 것이 아니라 매번 새롭게 생성이 되고 호출이 되는데, 여기에서 즉시 실행 함수가 반환한 함수는 자신이 생성 됐을 때의 렉시컬 환경을 기억하기 때문에 반환된 값을 기억한다.
- 반환된 값이 따로 변경되지 않는한 계속해서 기억하기 때문에 상태 유지하는 것에 유용하다.
  > 클로저는 React의 useState 동작 방식에 크게 기여한다.

<br/>

## 2. 전역 변수 사용 억제 효과

- 전역 변수를 이용하고, 내부 함수에서 전역 변수의 값을 변경하는 방법이 있지만, 전역 변수를 사용하면 의도치 않게 값이 변경될 수 있기 때문에 전역 변수의 사용을 자제하는 것이 좋다.
- 따라서 전역 변수를 사용하는 대신, 지역 변수를 이용하고, 이 값을 그 지역의 클로저를 이용하여 값을 변경, 그리고 리턴을 함으로써 값을 기억하게 할 수 있다.
  > 이 개념은 불변성을 지향하는 함수형 프로그래밍에서 부수 효과를 최대한 억제하기 위한 방법이기도 하다.

<br/>

## 3. 정보의 은닉

- 함수 내부에서 선언되고 할당된 변수는 원래 외부에서 참조할 수가 없다.
- 하지만 클로저로 인해 지역 변수의 값이 변경 된다면, 클로저의 특성으로 변경된 값을 기억하고 있기 때문에 외부에서 참조할 수가 있다.
- 따라서 외부에서는 지역 변수의 값을 바꾸지 못하지만, 참조를 할 수 있는 형태가 되는 것이다. 이는 클래스 기반 언어의 private 기능과 유사하다.
