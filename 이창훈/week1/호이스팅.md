## 호이스팅

1)  호이스팅은 변수 선언문이 코드의 선두로 끌어 올려진 것 처럼 동작하는 자바스크립트의 특징을 호이스팅이라고 합니다.

2)  엄밀하게 말하자면 모든 변수 선언문, 함수 선언문, 제너레이터, 클래스를 사용해서 선언한 모든 식별자는 호이스팅됩니다.

3) 변수 선언 키워드인 var, let, const 로 선언한 변수 모두 끌어올려지지만, var키워드로 선언한 변수만이 변수 선언 이전에도  undefined 값을 갖게 됩니다.

4) 자바스크립트엔진은 소스코드를 '소스 코드의 평가'와 '소스 코드의 실행' 과정으로 나누어 처리합니다.

5) 소스코드의 평가 과정에서 자바스크립트 엔진은 변수 선언을 포함한 모든 선언문을 소스코드에서 찾아내서 먼저 실행하게 됩니다.

6) 그리고 소스코드의 평가과정이 끝나면 비로소 변수선언을 포함한 모든 선언문을 제외하고 소스코드를 한줄씩 순차적으로 실행합니다..

7) 변수 선언은 소스코드가 순차적으로 실행되는 시점인 런타임 이전에 실행되지만, 값의 할당은 런타임에 실행됩니다.

8) 소스코드의 평가과정을 시작하기 전에 자바스크립트 엔진은 먼저 전역 객체를 생성합니다.

9)  전역 실행 컨텍스트를 생성하여 실행 컨텍스트 스택에 푸시하고 전역렉시컬 환경을 생성하여 전역 실행 컨텍스트에 바인딩합니다.

10) 전역 렉시컬 환경을 구성하는 컴포넌트인 전역 환경 레코드는 객체 환경 레코드와 선언적 환경 레코드로 구성되어 있다.

11) 객체 환경 레코드는 var키워드로 선언한 변수와 함수선언문으로 정의한 전역 함수를 관리합니다.

12) 객체 환경 레코드는 Binding Object라고 부르는 객체와 연결됩니다. (BindingObject는 전역 객체 생성단계에서 생성된 전역 객체다.)

13) var키워드로 선언된 변수와 함수선언문으로 정의한 전역함수는 객체 환경 레코드에 연결된 BindingObject를 통해 전역 객체의 프로퍼티와 메서드가 된다. 

14) BindingObject를 통해 전역객체에 변수 식별자 키로 등록한 다음 암묵적으로 undefined를 바인딩한다.

15) 이러한 이유로 var키워드로 선언한 변수는 소스코드 실행 단계에서 변수 선언문 이전에도 참조할 수 있다. 단 변수 선언문 이전에 참조한 변수의 값은 언제나 undefined이다.

16) 선언적 환경 레코드는 let, const 키워드로 선언한 전역 변수를 관리한다. 선언적 환경 레코드의 let, const 키워드로 선언한 변수는 전역 객체의 프로퍼티가 되지 않고, 개념적인 블록내에 존재하게 되는데 여기서 개념적 블록이란 바로 전역 환경 레코드의 선언적 환경레코드이다. 

17) const의 경우 소스 코드의 실행 단계에서는 const 키워드로 선언한 변수는 선언과 동시에 초기화 해야한다.  

18) 다만 소스코드의 평가 과정의 관점에서는 const 로 선언한 변수는 선언 단계와 초기화 단계로 분리되어 진행된다.

19) 런타임 이전에 자바스크립트 엔진에 의해서 암묵적으로 선언 단계가 먼저 실행되지만, 초기화 단계는 변수 선언문에 도달했을 때 실행됩니다. 따라서 런타임에 변수 선언문에 도달하기 전까지 TDZ 존에 빠지게된다.

20)  let, const로 선언한 변수도 변수 호이스팅이 발생한다. 단 let, const 키워드로 선언한 변수는 변수 선언문에 도달하기 전까지 TDZ존에 빠지기 때문에 참조할 수 없다.



